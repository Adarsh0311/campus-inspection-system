<!--<app-page-header-->
<!--  title="Building Management"-->
<!--  subtitle="Manage campus buildings and their inspection checklists">-->
<!--</app-page-header>-->

<div class="container">
  <!-- Action Bar -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <div>
      <h2 class="h4 mb-0">Buildings Overview</h2>
      <small class="text-muted">{{ buildings.length }} total buildings</small>
    </div>
    <a routerLink="/buildings/new" class="btn btn-primary">
      <i class="bi bi-plus-circle me-2"></i>
      Add New Building
    </a>
  </div>

    <!-- Filter Bar -->
  <div class="card mb-4">
    <div class="card-body py-3">
      <div class="row g-3 align-items-end">
        <div class="col-md-4">
          <label for="searchFilter" class="form-label form-label-sm">Search Buildings</label>
          <div class="input-group">
            <span class="input-group-text">
              <i class="bi bi-search"></i>
            </span>
            <input type="text" class="form-control" id="searchFilter" [(ngModel)]="filterBuildingName"
              (ngModelChange)="filterBuildings()" placeholder="Search by name">
          </div>
        </div>
        <div class="col-md-2">
          <button class="btn btn-outline-secondary w-100" (click)="clearFilters()">
            <i class="bi bi-x-circle me-1"></i>
            Clear
          </button>
        </div>
      </div>
    </div>
  </div>


  <!-- Error Message -->
  <div *ngIf="errorMessage" class="alert alert-danger alert-dismissible" role="alert">
    <i class="bi bi-exclamation-triangle me-2"></i>
    {{ errorMessage }}
  </div>

  <!-- Loading State -->
  <app-loading-spinner
    *ngIf="isLoading"
    message="Loading buildings..."
    [height]="300">
  </app-loading-spinner>

  <!-- Buildings Table -->
  <div *ngIf="!isLoading && filteredBuildings.length > 0" class="card">
    <div class="table-responsive">
      <table class="table table-hover table-bordered mb-0">
        <thead class="table-secondary">
          <tr>
            <th>Building Name</th>
            <th>Location</th>
            <th>Checklist Items</th>
            <th>Last Updated</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let building of filteredBuildings">
            <td>
              <div class="d-flex align-items-center">
                <div class="bg-opacity-10 rounded-circle p-2 me-3">
                  <i class="bi bi-building text-primary"></i>
                </div>
                <div>
                  <div class="fw-semibold">{{ building.name }}</div>
                </div>
              </div>
            </td>
            <td>
              <span class="text-muted" *ngIf="building.location; else noLocation">
                <i class="bi bi-geo-alt me-1"></i>{{ building.location }}
              </span>
              <ng-template #noLocation>
                <span class="text-muted fst-italic">No location specified</span>
              </ng-template>
            </td>
            <td>
              <span class="badge bg-light text-dark">
                {{ building?.checklistItems?.length || 0 }} items
              </span>
            </td>
            <td>
              <small class="text-muted">{{ building.updatedAt | date:'short' }}</small>
            </td>
            <td>
              <div class="d-flex justify-content-left gap-1">
                <button
                  class="btn-sm btn btn-success"
                  [routerLink]="['/buildings/edit', building.id]"
                  title="Edit building">
                  <!-- <i>Edit</i> -->
                  Edit
                </button>
                <button
                  class="btn-sm btn btn-danger"
                  (click)="onDeleteBuilding(building.id, building.name)"
                  title="Delete building">
                  <!-- <i class="bi bi-trash"></i> -->
                  Delete
                </button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Empty State -->
  <app-empty-state
    *ngIf="!isLoading && filteredBuildings.length === 0"
    title="No buildings found"
    message=""
    icon="bi-building">
  </app-empty-state>
</div>
