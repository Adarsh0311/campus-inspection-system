<!--<app-page-header-->
<!--  title="Building Management"-->
<!--  subtitle="Manage campus buildings and their inspection checklists">-->
<!--</app-page-header>-->

<div class="container">
  <!-- Action Bar -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <div>
      <h2 class="h4 mb-0">Buildings Overview</h2>
      <small class="text-muted">{{ buildings.length }} total buildings</small>
    </div>
    <a routerLink="/buildings/new" class="btn btn-primary">
      <i class="bi bi-plus-circle me-2"></i>
      Add New Building
    </a>
  </div>

  <!-- Error Message -->
  <div *ngIf="errorMessage" class="alert alert-danger alert-dismissible" role="alert">
    <i class="bi bi-exclamation-triangle me-2"></i>
    {{ errorMessage }}
  </div>

  <!-- Loading State -->
  <app-loading-spinner
    *ngIf="isLoading"
    message="Loading buildings..."
    [height]="300">
  </app-loading-spinner>

  <!-- Buildings Table -->
  <div *ngIf="!isLoading && buildings.length > 0" class="card">
    <div class="table-responsive">
      <table class="table table-enhanced mb-0">
        <thead>
          <tr>
            <th>Building Name</th>
            <th>Location</th>
            <th>Checklist Items</th>
            <th>Last Updated</th>
            <th class="text-end">Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let building of buildings">
            <td>
              <div class="d-flex align-items-center">
                <div class="bg-opacity-10 rounded-circle p-2 me-3">
                  <i class="bi bi-building text-primary"></i>
                </div>
                <div>
                  <div class="fw-semibold">{{ building.name }}</div>
                </div>
              </div>
            </td>
            <td>
              <span class="text-muted" *ngIf="building.location; else noLocation">
                <i class="bi bi-geo-alt me-1"></i>{{ building.location }}
              </span>
              <ng-template #noLocation>
                <span class="text-muted fst-italic">No location specified</span>
              </ng-template>
            </td>
            <td>
              <span class="badge bg-light text-dark">
                {{ building.checklistItems?.length || 0 }} items
              </span>
            </td>
            <td>
              <small class="text-muted">{{ building.updatedAt | date:'short' }}</small>
            </td>
            <td class="text-end">
              <div class="btn-group btn-group-sm">
                <button
                  class="btn btn-outline-primary"
                  [routerLink]="['/buildings/edit', building.id]"
                  title="Edit building">
                  <i class="bi bi-pencil"></i>
                </button>
                <button
                  class="btn btn-outline-danger"
                  (click)="onDeleteBuilding(building.id, building.name)"
                  title="Delete building">
                  <i class="bi bi-trash"></i>
                </button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Empty State -->
  <app-empty-state
    *ngIf="!isLoading && buildings.length === 0"
    title="No buildings found"
    message="Get started by adding your first building to the system."
    icon="bi-building">
    <a routerLink="/buildings/new" class="btn btn-primary">
      <i class="bi bi-plus-circle me-2"></i>
      Add First Building
    </a>
  </app-empty-state>
</div>
