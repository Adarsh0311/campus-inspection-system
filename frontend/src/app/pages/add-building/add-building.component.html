<h2>Add New Building</h2>
<div *ngIf="errorMessage" class="alert alert-danger">{{ errorMessage }}</div>    
<form (ngSubmit)="handleSaveBuilding()" #buildingForm="ngForm" class="card p-4">
  <div class="card bg-light p-2 mb-3">
    <div class="row">
      <div class="mb-3 col-md-6 col-lg-6">
        <label for="buildingName" class="form-label">Building Name</label>
        <input type="text" class="form-control" id="buildingName" [(ngModel)]="buildingName" name="buildingName"
          required>
      </div>
      <!-- <div class="mb-3 col-md-6 col-lg-6">
        <label for="buildingLocation" class="form-label">Location</label>
        <input type="text" class="form-control" id="buildingLocation" [(ngModel)]="buildingLocation"
          name="buildingLocation">
      </div> -->
      <div class="mb-3 col-md-6 col-lg-6">
        <label for="buildingStatus" class="form-label">Status</label>
        <select class="form-select" id="buildingStatus" [(ngModel)]="buildingStatus" name="buildingStatus" required>
          <option [ngValue]="true">Active</option>
          <option [ngValue]="false">Inactive</option>
        </select>
      </div>
    </div>

  </div>


  <div class="card bg-light p-3 mb-3">
    <h6>Add New Category</h6>
    <div class="col-md-12 row g-3 align-items-end">
      <select id="newCategory" class="form-select" size="7"
        [(ngModel)]="selectedCategories" name="newCategory"
        [multiple]="true">
        <option value="" disabled selected>Select data category</option>
        <option *ngFor="let category of getSortedCategories()" [ngValue]="category">{{ category.name }}</option>
      </select>
      <div class="col-md-12 mt-2 text-end">
        <button type="button" class="btn btn-secondary" (click)="handleAddItem()">Add Item</button>
      </div>

      <!-- <div class="col-md-6">
        <label for="newQuestion" class="form-label">Name</label>
        <input type="text" class="form-control" id="newQuestion" [(ngModel)]="newQuestion" name="newQuestion">
      </div>
      <div class="col-md-4">
        <label for="newQuestionType" class="form-label">Type</label>
        <select id="newQuestionType" class="form-select" [(ngModel)]="newQuestionType" name="newQuestionType">
          <option value="TEXT">Text</option>
          <option value="BOOLEAN">Yes/No</option>
          <option value="NUMERIC">Number</option>
        </select>
      </div>
      <div class="col-md-2 d-grid">
        <button type="button" class="btn btn-secondary" (click)="handleAddItem()">Add Item</button>
      </div> -->
    </div>
  </div>

    <div class="card bg-light p-3 mb-3">
    <h6>Data Categories</h6>
    <ul class="list-group mb-3">
      <li *ngFor="let item of checklistItems; let i = index"
        class="list-group-item d-flex justify-content-between align-items-center">
        <span>{{ item.question }}&nbsp;&nbsp;<span class="badge bg-secondary">{{ item.type }}</span></span>
        <button type="button" class="btn btn-sm btn-outline-danger" (click)="handleRemoveItem(i)">Remove</button>
      </li>
      <li *ngIf="checklistItems.length === 0" class="list-group-item text-muted">No data categories yet.</li>
    </ul>
  </div>

  <div class="d-flex justify-content-end">
    <button type="button" class="btn btn-outline-secondary me-2"
      (click)="router.navigate(['/buildings'])">Cancel</button>
    <button type="submit" class="btn btn-primary" [disabled]="buildingForm.invalid || checklistItems.length === 0">Save
      Building</button>
  </div>
</form>